<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Read a log. — log_read • autometric</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Read a log. — log_read"><meta property="og:description" content="Read a log file into R."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">autometric</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/wlandau/autometric/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read a log.</h1>
    <small class="dont-index">Source: <a href="https://github.com/wlandau/autometric/blob/main/R/log_read.R" class="external-link"><code>R/log_read.R</code></a></small>
    <div class="hidden name"><code>log_read.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read a log file into R.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">log_read</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  units_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"seconds"</span>, <span class="st">"minutes"</span>, <span class="st">"hours"</span>, <span class="st">"days"</span><span class="op">)</span>,</span>
<span>  units_cpu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"percentage"</span>, <span class="st">"fraction"</span><span class="op">)</span>,</span>
<span>  units_memory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"megabytes"</span>, <span class="st">"bytes"</span>, <span class="st">"kilobytes"</span>, <span class="st">"gigabytes"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Character string, file path of the log to read.
Must be a regular text file and not a directory.</p></dd>


<dt id="arg-units-time">units_time<a class="anchor" aria-label="anchor" href="#arg-units-time"></a></dt>
<dd><p>Character string, units of the <code>time</code> field.
Defaults to <code>"seconds"</code> and must be in
<code>c("seconds", "minutes", "hours", "days")</code>.</p></dd>


<dt id="arg-units-cpu">units_cpu<a class="anchor" aria-label="anchor" href="#arg-units-cpu"></a></dt>
<dd><p>Character string with the units of the <code>cpu</code> field.
Defaults to <code>"percentage"</code> and must be in <code>c("percentage", "fraction")</code>.</p></dd>


<dt id="arg-units-memory">units_memory<a class="anchor" aria-label="anchor" href="#arg-units-memory"></a></dt>
<dd><p>Character string with the units of the
<code>memory</code> field. Defaults to <code>"megabytes"</code> and must be in
<code>c("megabytes", "bytes", "kilobytes", "gigabytes")</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame of metrics from the log with one row per log entry
and columns with metadata and resource usage metrics.
<code>log_read()</code> automatically converts the data into the units
chosen with arguments <code>units_time</code>, <code>units_cpu</code>, and <code>units_memory</code>.
The returned data frame has the following columns:</p><ul><li><p><code>version</code>: Version of the package used to write the log entry.</p></li>
<li><p><code>pid</code>: Process ID monitored.</p></li>
<li><p><code>status</code>: A status code for the log entry. Status 0 means
logging succeeded. A status code not equal to 0 indicates
something went wrong and the metrics should not be trusted.</p></li>
<li><p><code>time</code>: numeric time stamp at which the entry was logged.
<code>log_read()</code> automatically recenters this column so that time 0
indicates the first logged entry.
Use the <code>units_time</code> argument to customize the units of this field.</p></li>
<li><p><code>core</code>: CPU load of the process scaled relative to a single
CPU core. Measures the amount of time the process spends running
during a given interval of elapsed time.</p>
<p>On Mac OS, the package uses native system calls to get CPU core usage.
On Linux and Windows, the package calculates it manually using.
user + kernel clock cycles that ran during a sampling interval.
It measures the clock cycles that the process executed during
the interval, converts the clock cycles into seconds,
then divides the result by the elapsed time of the interval.
The length of the sampling interval is the <code>seconds</code> argument
supplied to <code><a href="log_start.html">log_start()</a></code>, or length of time between
calls to <code><a href="log_print.html">log_print()</a></code>.
The first <code>core</code> measurement is 0 to reflect that a full sampling
interval has not elapsed yet.</p>
<p><code>core</code> can be read in as a percentage or fraction, depending on
the <code>units_cpu</code> argument.</p></li>
<li><p><code>cpu</code>: <code>core</code> divided by the number of logical CPU cores.
This metric measures the load on the machine as a whole,
not just the CPU core it runs on.
Use the <code>units_cpu</code> argument to customize the units of this field.</p></li>
<li><p><code>rss</code>: resident set size, the total amount of memory used by the
process at the time of logging. This include the memory unique
to the process (unique set size USS) and shared memory.
Use the <code>units_memory</code> argument to customize the units of this field.</p></li>
<li><p><code>virtual</code>: total virtual memory available to the process.
The process does not necessarily use all this memory, but
it can request more virtual memory throughout its life cycle.
Use the <code>units_memory</code> argument to customize the units of this field.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p><code>log_read()</code> is capable of reading a log file where both
<code>autometric</code> and other processes have printed. Whenever <code>autometric</code>
writes to a log, it bounds the beginning and end of the text
with the keyword  <code>"__AUTOMETRIC__"</code>.
that way, <code>log_read()</code> knows to only read and process the correct
lines of the file.</p>
<p>In addition, it automatically converts the log data
into the units  <code>units_time</code>,
<code>units_cpu</code>, and <code>units_memory</code> arguments.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span>  <span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="log_start.html">log_start</a></span><span class="op">(</span>seconds <span class="op">=</span> <span class="fl">1</span>, path <span class="op">=</span> <span class="va">path</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="log_stop.html">log_stop</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">log_read</span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   version  pid status  time core cpu resident  virtual</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.0.1 5659      0 0.000    0   0 153.3051 574.7507</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   0.0.1 5659      0 1.000    0   0 153.3051 574.7507</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   0.0.1 5659      0 2.001    0   0 153.3051 574.7507</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by William Michael Landau, Eli Lilly and Company.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

